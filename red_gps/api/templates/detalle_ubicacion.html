<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Detalle ubicación</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-5">
  <h1>Ubicación del {{ ubicacion.fecha_hora }}</h1>
  <p><strong>Latitud:</strong> {{ ubicacion.latitud }}</p>
  <p><strong>Longitud:</strong> {{ ubicacion.longitud }}</p>

  <div id="map" style="height:400px; width:100%;"></div>

  <a href="{% url 'lista_ubicaciones' %}" class="btn btn-secondary mt-3">⬅ Volver a la lista</a>

  <script src="https://maps.googleapis.com/maps/api/js?key=TU_API_KEY&callback=initMap" async defer></script>
<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
  var map = L.map('map').setView([{{ ubicacion.latitud }}, {{ ubicacion.longitud }}], 15);

  // Capa base de OpenStreetMap
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
  }).addTo(map);

  // Marcador
  L.marker([{{ ubicacion.latitud }}, {{ ubicacion.longitud }}])
    .addTo(map)
    .bindPopup("Ubicación guardada el {{ ubicacion.fecha_hora }}")
    .openPopup();
</script>
</body>
</html>
